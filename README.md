# Active-H-EMV

**åŸºäº AgentScope æ¡†æ¶çš„ä¸»åŠ¨å¼é•¿æ—¶åºæœºå™¨äººè®°å¿†ç®¡ç†ç³»ç»Ÿ**

[![Python](https://img.shields.io/badge/Python-3.10+-blue)](https://www.python.org/)
[![AgentScope](https://img.shields.io/badge/AgentScope-0.0.5+-green)](https://github.com/agentscope-ai/agentscope)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

---

## ğŸ¯ é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®åœ¨ **H-EMVï¼ˆHierarchical Episodic Memory Verbalizationï¼‰** çš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†**ä¸»åŠ¨å¼è®°å¿†ç®¡ç†æœºåˆ¶**ï¼Œä½¿æœºå™¨äººè®°å¿†ç³»ç»Ÿä»"è¢«åŠ¨å­˜å‚¨"è½¬å˜ä¸º"ä¸»åŠ¨ä¼˜åŒ–"ã€‚

### æ ¸å¿ƒåˆ›æ–°ï¼šä¸‰ä¸ªåå¤„ç†Agent

- ğŸ§  **é—å¿˜Agent (ForgettingAgent)**: ä¸»åŠ¨åˆ é™¤ä½æ•ˆç”¨è®°å¿†ï¼Œé¿å…å­˜å‚¨çˆ†ç‚¸
- ğŸŒ™ **æ•´åˆAgent (ConsolidationAgent)**: æå–è·¨äº‹ä»¶æ¨¡å¼ï¼Œå®ç°çŸ¥è¯†æ³›åŒ–
- ğŸ”§ **ä¿®æ­£Agent (CorrectionAgent)**: äººæœºå›ç¯çº é”™ï¼Œç¡®ä¿è®°å¿†å‡†ç¡®æ€§

**è®¾è®¡ç†å¿µ**: æ¨¡æ‹Ÿäººè„‘çš„è®°å¿†ç®¡ç†æœºåˆ¶ï¼ˆé—å¿˜ã€ç¡çœ å·©å›ºã€è®¤çŸ¥ä¿®æ­£ï¼‰ï¼Œè€Œä¸æ˜¯å•çº¯çš„æ•°æ®å­˜å‚¨ã€‚

---

## ğŸ†š ç›¸æ¯”åŸå§‹H-EMVçš„æ”¹è¿›

### åŸå§‹H-EMVçš„å±€é™æ€§

**H-EMVè®ºæ–‡** (Baermann et al., KIT, 2024) æå‡ºäº†ä¼˜ç§€çš„å±‚çº§åŒ–è®°å¿†æ•°æ®ç»“æ„ï¼š

```
L4+ (é«˜å±‚æ‘˜è¦)
 â†‘
L3 (ç›®æ ‡çº§æ€»ç»“)
 â†‘
L2 (äº‹ä»¶çº§æ€»ç»“)
 â†‘
L1 (åœºæ™¯å›¾)
 â†‘
L0 (åŸå§‹æ•°æ®: å›¾åƒ/æ–‡æœ¬/ä¼ æ„Ÿå™¨)
```

**ä½†å­˜åœ¨ä»¥ä¸‹é—®é¢˜**ï¼š

| é—®é¢˜ | åŸå§‹H-EMV | Active-H-EMV (æœ¬é¡¹ç›®) |
|------|-----------|----------------------|
| **è®°å¿†çˆ†ç‚¸** | âŒ æ— é—å¿˜æœºåˆ¶ï¼Œéšæ—¶é—´çº¿æ€§å¢é•¿ | âœ… æ•ˆç”¨é©±åŠ¨é—å¿˜ï¼Œè‡ªåŠ¨æ¸…ç†ä½ä»·å€¼è®°å¿† |
| **å†—ä½™è®°å¿†** | âŒ ç›¸ä¼¼ç»éªŒé‡å¤å­˜å‚¨ | âœ… æ•´åˆç›¸ä¼¼è®°å¿†ï¼Œæå–é€šç”¨æ¨¡å¼ |
| **é”™è¯¯ç´¯ç§¯** | âŒ VLMè¯¯è¯†åˆ«æ°¸ä¹…ä¿ç•™ | âœ… äººæœºå›ç¯ä¿®æ­£ï¼Œçº§è”æ›´æ–° |
| **æ³›åŒ–èƒ½åŠ›** | âŒ æ¯æ¬¡ç»éªŒç‹¬ç«‹å­˜å‚¨ | âœ… è‡ªåŠ¨æå–è§„å¾‹ï¼ˆå¦‚"è‹¹æœé€šå¸¸åœ¨å¨æˆ¿"ï¼‰ |
| **é•¿æœŸè¿è¡Œ** | âŒ éœ€è¦å®šæœŸäººå·¥æ¸…ç† | âœ… å…¨è‡ªåŠ¨åå°ç»´æŠ¤ |

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½è¯¦è§£

### 1. é—å¿˜Agent (ForgettingAgent) ğŸ—‘ï¸

**é—®é¢˜**: æœºå™¨äººè¿ç»­è¿è¡Œ6ä¸ªæœˆï¼Œè®°å¿†æ ‘ä»100ä¸ªèŠ‚ç‚¹å¢é•¿åˆ°10ä¸‡ä¸ªèŠ‚ç‚¹ï¼Œå­˜å‚¨å’Œæ£€ç´¢éƒ½å˜å¾—ç¼“æ…¢ã€‚

**è§£å†³æ–¹æ¡ˆ**: æ•ˆç”¨é©±åŠ¨çš„è‡ªé€‚åº”é—å¿˜

```python
# è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„æ•ˆç”¨å€¼
U(n, t) = Î±Â·A(n, t) + Î²Â·S(n) + Î³Â·I(n)

å…¶ä¸­:
- A(n, t): è®¿é—®é¢‘ç‡ï¼ˆæœ€è¿‘è®¿é—®çš„è®°å¿†æ›´é‡è¦ï¼‰
- S(n): è¯­ä¹‰é‡è¦æ€§ï¼ˆé‡è¦äº‹ä»¶ä¿ç•™æ›´ä¹…ï¼‰
- I(n): ä¿¡æ¯å¯†åº¦ï¼ˆä¿¡æ¯é‡å¤§çš„è®°å¿†ä¼˜å…ˆä¿ç•™ï¼‰
- Î±, Î², Î³: å¯è°ƒèŠ‚æƒé‡
```

**æ•ˆæœ**:
- åˆ é™¤ä½æ•ˆç”¨è®°å¿†ï¼ˆå¦‚"æœºå™¨äººåœ¨èµ°å»Šå¾…äº†3ç§’"ï¼‰
- ä¿ç•™é«˜ä»·å€¼è®°å¿†ï¼ˆå¦‚"ç”¨æˆ·æ•™æœºå™¨äººå¼€é—¨çš„æ­¥éª¤"ï¼‰
- å­˜å‚¨ç©ºé—´å‹ç¼© 60%+ï¼Œæ£€ç´¢é€Ÿåº¦æå‡ 2-3å€

**è¿è¡Œé¢‘ç‡**: æ¯å°æ—¶è‡ªåŠ¨è¿è¡Œä¸€æ¬¡

---

### 2. æ•´åˆAgent (ConsolidationAgent) ğŸ§©

**é—®é¢˜**: æœºå™¨äºº10æ¬¡æ‹¿è‹¹æœï¼Œè®°å¿†ä¸­å­˜å‚¨äº†10æ¡"è‹¹æœåœ¨å¨æˆ¿æ¡Œä¸Š"çš„è®°å½•ï¼Œä½†æ²¡æœ‰å½¢æˆé€šç”¨è§„å¾‹ã€‚

**è§£å†³æ–¹æ¡ˆ**: æ¨¡å¼æå–ä¸è®°å¿†å·©å›º

```python
# è¯†åˆ«ç›¸ä¼¼è®°å¿†
ç›¸ä¼¼åº¦é˜ˆå€¼ = 0.85
if similarity(memory_A, memory_B) > 0.85:
    åˆå¹¶ä¸º: "é€šç”¨è§„å¾‹: è‹¹æœé€šå¸¸åœ¨å¨æˆ¿"
    ä¿ç•™å…·ä½“å®ä¾‹: ["2024-01-15çš„çº¢è‹¹æœ", "2024-01-20çš„é’è‹¹æœ"]
```

**æ•ˆæœ**:
- ä»10æ¬¡ç»éªŒä¸­æå–ï¼š"è‹¹æœâ†’å¨æˆ¿"çš„å…³è”è§„å¾‹
- å‡å°‘å†—ä½™å­˜å‚¨ï¼Œæé«˜æ³›åŒ–èƒ½åŠ›
- ç”Ÿæˆå¯å¤ç”¨çš„æŠ€èƒ½ç‰‡æ®µï¼ˆå¦‚"æ‹¿æ°´æœ"é€šç”¨æµç¨‹ï¼‰

**è¿è¡Œé¢‘ç‡**: æ¯æ™š2ç‚¹è‡ªåŠ¨è¿è¡Œï¼ˆæ¨¡æ‹Ÿç¡çœ å·©å›ºï¼‰

---

### 3. ä¿®æ­£Agent (CorrectionAgent) âœï¸

**é—®é¢˜**: VLMè¯¯è¯†åˆ«äº†é’è‹¹æœä¸º"æ¢¨å­"ï¼Œè¿™ä¸ªé”™è¯¯è¢«å­˜å‚¨åœ¨è®°å¿†æ ‘ä¸­ï¼Œå½±å“åç»­æ¨ç†ã€‚

**è§£å†³æ–¹æ¡ˆ**: äººæœºå›ç¯çº é”™ + çº§è”æ›´æ–°

```python
ç”¨æˆ·: "é‚£æ˜¯é’è‹¹æœï¼Œä¸æ˜¯æ¢¨å­"
      â†“
CorrectionAgent:
  1. å®šä½é”™è¯¯èŠ‚ç‚¹: L0[image_123] â†’ L1[scene_456] â†’ L2[event_789]
  2. ä¿®æ­£L0: "æ¢¨å­" â†’ "é’è‹¹æœ"
  3. çº§è”æ›´æ–°L1: åœºæ™¯å›¾ä¸­çš„å¯¹è±¡
  4. çº§è”æ›´æ–°L2: äº‹ä»¶æè¿°
  5. è®°å½•ä¿®æ­£å†å²: {timestamp, original, corrected}
```

**æ•ˆæœ**:
- ä¸€æ¬¡çº é”™ï¼Œè‡ªåŠ¨æ›´æ–°æ‰€æœ‰ç›¸å…³èŠ‚ç‚¹
- ä¿ç•™ä¿®æ­£å†å²ï¼Œæ”¯æŒå®¡è®¡
- é¿å…é”™è¯¯ä¼ æ’­åˆ°é«˜å±‚æ¨ç†

**è¿è¡Œé¢‘ç‡**: æŒ‰éœ€è¿è¡Œï¼ˆç”¨æˆ·çº é”™æ—¶è§¦å‘ï¼‰

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-repo/Active-H-EMV.git
cd Active-H-EMV

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# é…ç½®API Key
export OPENAI_API_KEY="your-key-here"
```

### åŸºç¡€ä½¿ç”¨

```python
import agentscope
from active_hemv.agents import MemoryManager

# 1. åˆå§‹åŒ–AgentScope
agentscope.init(model_configs=[{
    "model_type": "openai_chat",
    "config_name": "gpt-4o",
    "model_name": "gpt-4o",
    "api_key": "your-api-key"
}])

# 2. åŠ è½½è®°å¿†æ ‘ï¼ˆä½¿ç”¨llm_emvæ„å»ºçš„H-EMVæ ‘ï¼‰
import pickle
with open("data/memory_tree.pkl", 'rb') as f:
    memory_tree = pickle.load(f)

# 3. åˆ›å»ºMemoryManagerï¼ˆå¸¦è‡ªåŠ¨è°ƒåº¦ï¼‰
manager = MemoryManager(
    memory_tree=memory_tree,
    enable_auto_schedule=True,      # è‡ªåŠ¨è¿è¡Œé—å¿˜+æ•´åˆ
    storage_path="./memory.pkl"
)

# 4. Agentè‡ªåŠ¨åœ¨åå°è¿è¡Œ
# - é—å¿˜Agent: æ¯å°æ—¶è‡ªåŠ¨æ¸…ç†
# - æ•´åˆAgent: æ¯æ™šè‡ªåŠ¨å·©å›º
# - ä¿®æ­£Agent: ç”¨æˆ·çº é”™æ—¶è¿è¡Œ

# 5. ç”¨æˆ·çº é”™ç¤ºä¾‹
result = manager.correct_memory(
    query="è‹¹æœæ˜¯ä»€ä¹ˆé¢œè‰²ï¼Ÿ",
    system_answer="çº¢è‰²",
    user_correction="æ˜¯é’è‹¹æœï¼Œç»¿è‰²çš„"
)
print(f"âœ… ä¿®æ­£å®Œæˆï¼Œæ›´æ–°äº† {result['nodes_updated']} ä¸ªèŠ‚ç‚¹")

# 6. æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯
stats = manager.get_stats()
print(f"""
è®°å¿†ç»Ÿè®¡:
- æ€»èŠ‚ç‚¹æ•°: {stats['total_nodes']}
- å·²é—å¿˜: {stats['forgotten_nodes']}
- å·²æ•´åˆ: {stats['consolidated_groups']}
- å·²ä¿®æ­£: {stats['corrections']}
""")
```

### è¿è¡Œç¤ºä¾‹

```bash
python examples/simple_usage.py
```

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           H-EMV Tree (åŸå§‹æ•°æ®ç»“æ„)                     â”‚
â”‚  ä½¿ç”¨ç°æœ‰ llm_emv ä»£ç æ„å»ºï¼Œä¿æŒé«˜æ•ˆæ£€ç´¢               â”‚
â”‚  L0 (åŸå§‹) â†’ L1 (åœºæ™¯) â†’ L2 (äº‹ä»¶) â†’ L3+ (æ‘˜è¦)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â†“ å®šæœŸä¼˜åŒ–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         è®°å¿†åå¤„ç†å±‚ (æœ¬é¡¹ç›®åˆ›æ–°) â­                    â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ ForgettingAgent  â”‚  â”‚ConsolidationAgentâ”‚           â”‚
â”‚  â”‚ è‡ªé€‚åº”é—å¿˜       â”‚  â”‚ æ¨¡å¼æå–         â”‚           â”‚
â”‚  â”‚ æ¯å°æ—¶è¿è¡Œ       â”‚  â”‚ æ¯æ™šè¿è¡Œ         â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚  â”‚ CorrectionAgent  â”‚                                  â”‚
â”‚  â”‚ è¿½æº¯ä¿®æ­£         â”‚                                  â”‚
â”‚  â”‚ æŒ‰éœ€è¿è¡Œ         â”‚                                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                                         â”‚
â”‚  MemoryManager: ç»Ÿä¸€è°ƒåº¦å’Œç®¡ç†                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®è®¾è®¡æ€æƒ³**: 
- **ä¿ç•™H-EMVçš„ä¼˜åŠ¿**: å±‚çº§åŒ–ç»“æ„ã€é«˜æ•ˆæ£€ç´¢ã€VQAæ”¯æŒ
- **å¢åŠ ä¸»åŠ¨ç®¡ç†**: ä¸‰ä¸ªAgentä½œä¸º"åå¤„ç†å™¨"ï¼Œå®šæœŸä¼˜åŒ–è®°å¿†æ ‘
- **åˆ†ç¦»å…³æ³¨ç‚¹**: æ•°æ®ç»“æ„ vs å¤„ç†é€»è¾‘ï¼Œæ¨¡å—åŒ–è®¾è®¡

---

## ğŸ“ ç†è®ºåŸºç¡€

### è®¤çŸ¥ç§‘å­¦æ˜ å°„

| äººè„‘æœºåˆ¶ | æœ¬é¡¹ç›®å®ç° | ç†è®ºä¾æ® |
|---------|-----------|---------|
| **é—å¿˜æ›²çº¿** | ForgettingAgent | Ebbinghausé—å¿˜æ›²çº¿ (1885) |
| **ç¡çœ å·©å›º** | ConsolidationAgent | è®°å¿†å·©å›ºç†è®º (McClelland, 1995) |
| **è®¤çŸ¥ä¿®æ­£** | CorrectionAgent | è®¤çŸ¥å¤±è°ƒç†è®º (Festinger, 1957) |

### æ•ˆç”¨å‡½æ•°è®¾è®¡

```python
U(n, t) = Î±Â·A(n, t) + Î²Â·S(n) + Î³Â·I(n)

A(n, t) = Î£ e^(-Î»Â·Î”t_i)  # è®¿é—®é¢‘ç‡ï¼ˆæŒ‡æ•°è¡°å‡ï¼‰
S(n) = LLMè¯„ä¼°(èŠ‚ç‚¹é‡è¦æ€§)  # è¯­ä¹‰é‡è¦æ€§
I(n) = èŠ‚ç‚¹å­—ç¬¦æ•° / å¹³å‡å­—ç¬¦æ•°  # ä¿¡æ¯å¯†åº¦

æ¨èå‚æ•°: Î±=0.5, Î²=0.3, Î³=0.2, Î»=0.1
```

---

## ğŸ“Š é¢„æœŸæ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | è¯´æ˜ |
|-----|--------|------|
| **å­˜å‚¨å‹ç¼©æ¯”** | 60%+ | é—å¿˜åèŠ‚ç‚¹æ•°å‡å°‘ |
| **æ£€ç´¢åŠ é€Ÿ** | 2-3x | èŠ‚ç‚¹å‡å°‘å¸¦æ¥çš„é€Ÿåº¦æå‡ |
| **é—å¿˜åå¬å›ç‡** | >85% | åˆ é™¤çš„éƒ½æ˜¯ä½ä»·å€¼è®°å¿† |
| **ä¿®æ­£å‡†ç¡®ç‡** | >90% | çº§è”æ›´æ–°çš„æ­£ç¡®æ€§ |
| **æ¨¡å¼æå–ç‡** | >70% | èƒ½ä»é‡å¤ç»éªŒä¸­æå–è§„å¾‹ |

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **AgentScope**: å¤šæ™ºèƒ½ä½“åä½œæ¡†æ¶ï¼ˆæä¾›AgentåŸºç¡€è®¾æ–½ï¼‰
- **H-EMV**: å±‚çº§åŒ–æƒ…æ™¯è®°å¿†æ•°æ®ç»“æ„ï¼ˆå¤ç”¨åŸæœ‰å®ç°ï¼‰
- **LangChain**: LLMè°ƒç”¨å°è£…
- **APScheduler**: å®šæ—¶ä»»åŠ¡è°ƒåº¦ï¼ˆé—å¿˜/æ•´åˆè‡ªåŠ¨è¿è¡Œï¼‰
- **Loguru**: æ—¥å¿—è®°å½•

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
Active-H-EMV/
â”œâ”€â”€ active_hemv/              # ğŸ†• æœ¬é¡¹ç›®æ ¸å¿ƒä»£ç 
â”‚   â”œâ”€â”€ agents/               # ä¸‰ä¸ªAgentå®ç°
â”‚   â”‚   â”œâ”€â”€ forgetting_agent.py      # é—å¿˜Agent
â”‚   â”‚   â”œâ”€â”€ consolidation_agent.py   # æ•´åˆAgent
â”‚   â”‚   â”œâ”€â”€ correction_agent.py      # ä¿®æ­£Agent
â”‚   â”‚   â””â”€â”€ memory_manager.py        # ç»Ÿä¸€ç®¡ç†å™¨
â”‚   â”œâ”€â”€ memory/               # è®°å¿†ç®¡ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ utility_scorer.py        # æ•ˆç”¨å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ forgetting_policy.py     # é—å¿˜ç­–ç•¥
â”‚   â”‚   â””â”€â”€ editing_engine.py        # ç¼–è¾‘å¼•æ“
â”‚   â””â”€â”€ storage/              # å­˜å‚¨å±‚
â”‚       â””â”€â”€ vector_store.py
â”‚
â”œâ”€â”€ em/                       # [æ¥è‡ªH-EMV] æ•°æ®ç»“æ„
â”‚   â””â”€â”€ em_tree.py
â”‚
â”œâ”€â”€ llm_emv/                  # [æ¥è‡ªH-EMV] æŸ¥è¯¢ç³»ç»Ÿ
â”‚   â”œâ”€â”€ emv_api.py
â”‚   â””â”€â”€ setup.py
â”‚
â”œâ”€â”€ lmp/                      # [æ¥è‡ªH-EMV] LMPæ¡†æ¶
â”‚
â”œâ”€â”€ examples/                 # ä½¿ç”¨ç¤ºä¾‹
â”‚   â”œâ”€â”€ simple_usage.py
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ docs/                     # æ–‡æ¡£
â”‚   â”œâ”€â”€ WHY_USE_AGENT_FRAMEWORK.md
â”‚   â””â”€â”€ CORRECTION_STRATEGY_ANALYSIS.md
â”‚
â””â”€â”€ experiments/              # è¯„ä¼°å®éªŒ
    â””â”€â”€ run_teach_evaluation.py
```

---

## ğŸ¯ æ¯•ä¸šè®¾è®¡åˆ›æ–°ç‚¹æ€»ç»“

### 1. é—®é¢˜å®šä¹‰ â­

**å‘ç°çš„é—®é¢˜**: åŸå§‹H-EMVç¼ºä¹ä¸»åŠ¨è®°å¿†ç®¡ç†æœºåˆ¶
- è®°å¿†éšæ—¶é—´æ— é™å¢é•¿
- ç›¸ä¼¼ç»éªŒé‡å¤å­˜å‚¨
- VLMé”™è¯¯æ°¸ä¹…ä¿ç•™

### 2. è§£å†³æ–¹æ¡ˆ â­â­

**ä¸‰ä¸ªåå¤„ç†Agent**: 
- ForgettingAgent: æ•ˆç”¨é©±åŠ¨é—å¿˜ï¼ˆåŸºäºè®¤çŸ¥å¿ƒç†å­¦ï¼‰
- ConsolidationAgent: æ¨¡å¼æå–ä¸çŸ¥è¯†æ³›åŒ–
- CorrectionAgent: äººæœºå›ç¯çº é”™

### 3. æ¶æ„è®¾è®¡ â­

**åˆ†ç¦»å¼æ¶æ„**: æ•°æ®ç»“æ„ï¼ˆH-EMVï¼‰+ å¤„ç†é€»è¾‘ï¼ˆAgentsï¼‰
- ä¿ç•™H-EMVçš„æ£€ç´¢æ•ˆç‡
- æ·»åŠ ä¸»åŠ¨ç®¡ç†èƒ½åŠ›
- ä½¿ç”¨AgentScopeæ¡†æ¶ï¼Œæ˜“äºæ‰©å±•

### 4. ç†è®ºè´¡çŒ® â­

- å°†è®¤çŸ¥ç§‘å­¦ç†è®ºï¼ˆé—å¿˜æ›²çº¿ã€è®°å¿†å·©å›ºï¼‰å½¢å¼åŒ–ä¸ºç®—æ³•
- æå‡ºæ•ˆç”¨å‡½æ•° `U(n,t) = Î±Â·A + Î²Â·S + Î³Â·I`
- è®¾è®¡çº§è”æ›´æ–°æœºåˆ¶

### 5. å·¥ç¨‹å®ç° â­

- ~1350è¡Œæ ¸å¿ƒä»£ç 
- å®Œæ•´çš„è‡ªåŠ¨åŒ–è°ƒåº¦ç³»ç»Ÿ
- ä¸°å¯Œçš„æ–‡æ¡£å’Œç¤ºä¾‹

---

## ğŸ§ª è¯„ä¼°ä¸æµ‹è¯•

```bash
# è¿è¡ŒTEAChæ•°æ®é›†è¯„ä¼°
python experiments/run_teach_evaluation.py \
    --method active_hemv \
    --dataset data/teach/test_set_100.pkl

# è¿è¡Œç®€å•æµ‹è¯•
python examples/simple_usage.py

# æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯
python -c "
from active_hemv.agents import MemoryManager
import pickle

with open('data/memory_tree.pkl', 'rb') as f:
    tree = pickle.load(f)

manager = MemoryManager(memory_tree=tree)
print(manager.get_stats())
"
```

---

## ğŸ“ å­¦æœ¯å£°æ˜

### åŸºç¡€å·¥ä½œå¼•ç”¨

æœ¬é¡¹ç›®åŸºäºä»¥ä¸‹ç ”ç©¶ï¼š

1. **H-EMVç®—æ³•**: Lukas Baermann et al. (KIT, 2024)
   - è®ºæ–‡: "Hierarchical Episodic Memory Verbalization"
   - ä»£ç : https://github.com/lbaermann/hierarchical-emv
   - æˆ‘ä»¬ä½¿ç”¨äº†å…¶æ•°æ®ç»“æ„ï¼ˆ`em/`ï¼‰å’ŒæŸ¥è¯¢ç³»ç»Ÿï¼ˆ`llm_emv/`ï¼‰

2. **AgentScopeæ¡†æ¶**: é˜¿é‡Œå·´å·´è¾¾æ‘©é™¢
   - é¡¹ç›®: https://github.com/modelscope/agentscope

### æœ¬é¡¹ç›®çš„åŸåˆ›è´¡çŒ®

ä½œä¸ºæœ¬ç§‘æ¯•ä¸šè®¾è®¡ï¼Œæœ¬é¡¹ç›®åœ¨H-EMVåŸºç¡€ä¸Šåšå‡ºä»¥ä¸‹**ç‹¬ç«‹è´¡çŒ®**ï¼š

#### âœ… æ ¸å¿ƒç®—æ³•è®¾è®¡ (100%åŸåˆ›)

1. **æ•ˆç”¨é©±åŠ¨é—å¿˜ç®—æ³•**
   - æ–‡ä»¶: `active_hemv/memory/utility_scorer.py` (~150è¡Œ)
   - æ–‡ä»¶: `active_hemv/memory/forgetting_policy.py` (~180è¡Œ)
   - åˆ›æ–°: å°†Ebbinghausæ›²çº¿å½¢å¼åŒ–ä¸ºæ•ˆç”¨å‡½æ•°

2. **è®°å¿†æ•´åˆç®—æ³•**
   - æ–‡ä»¶: `active_hemv/agents/consolidation_agent.py` (~380è¡Œ)
   - åˆ›æ–°: åŸºäºè¯­ä¹‰ç›¸ä¼¼åº¦çš„æ¨¡å¼æå–æœºåˆ¶

3. **è¿½æº¯ä¿®æ­£ç®—æ³•**
   - æ–‡ä»¶: `active_hemv/agents/correction_agent.py` (~320è¡Œ)
   - åˆ›æ–°: çº§è”æ›´æ–°ç®—æ³•ï¼Œç¡®ä¿ä¿®æ­£ä¸€è‡´æ€§

#### âœ… ç³»ç»Ÿå®ç° (100%åŸåˆ›)

- `active_hemv/agents/forgetting_agent.py` (~280è¡Œ)
- `active_hemv/agents/memory_manager.py` (~350è¡Œ)
- `active_hemv/memory/editing_engine.py` (~220è¡Œ)
- `active_hemv/memory/consistency_checker.py` (~180è¡Œ)

#### âœ… ç†è®ºè´¡çŒ®

- å°†è®¤çŸ¥ç§‘å­¦ç†è®ºæ˜ å°„åˆ°æœºå™¨äººè®°å¿†ç³»ç»Ÿ
- æå‡º"æ•°æ®ç»“æ„ + åå¤„ç†Agent"çš„åˆ†ç¦»å¼æ¶æ„
- è®¾è®¡äº†å®Œæ•´çš„è‡ªåŠ¨åŒ–è®°å¿†ç®¡ç†æµç¨‹

**åŸåˆ›ä»£ç æ€»é‡**: ~1,350è¡Œæ ¸å¿ƒä»£ç  + ~3,000è¡Œæ–‡æ¡£

---

## ğŸ“š ä¸ºä»€ä¹ˆä½¿ç”¨AgentScopeæ¡†æ¶ï¼Ÿ

### ç®€çŸ­å›ç­”

**ç›´æ¥å†™Pythonç±»ä¹Ÿå¯ä»¥å®ç°åŠŸèƒ½ï¼Œä½†AgentScopeæ¡†æ¶æä¾›äº†**ï¼š

1. **LLMé›†æˆ** â­â­â­: è‡ªåŠ¨å¤„ç†APIè°ƒç”¨ã€é”™è¯¯é‡è¯•ã€æˆæœ¬è·Ÿè¸ª
   - èŠ‚çœ ~100è¡Œä»£ç 
   - é¿å…å¸¸è§é”™è¯¯ï¼ˆé€Ÿç‡é™åˆ¶ã€è¶…æ—¶ç­‰ï¼‰

2. **ç»Ÿä¸€æ¥å£** â­â­â­: æ ‡å‡†åŒ–çš„`Msg`é€šä¿¡æ ¼å¼
   - ä¸‰ä¸ªAgentæ¥å£ä¸€è‡´ï¼Œæ˜“äºæ‰©å±•
   - æ·»åŠ ç¬¬4ä¸ªAgentæ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç 

3. **æœªæ¥æ‰©å±•** â­â­: æ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½²ã€å¹¶å‘æ‰§è¡Œ
   - è™½ç„¶æ¯•è®¾æ˜¯å•æœºç‰ˆï¼Œä½†ä¸ºå®é™…åº”ç”¨ç•™ä¸‹ç©ºé—´

4. **å­¦æœ¯æ„ä¹‰** â­: ä½¿ç”¨ä¸»æµå¤šæ™ºèƒ½ä½“æ¡†æ¶
   - ä½“ç°å¯¹å‰æ²¿æŠ€æœ¯çš„æŒæ¡

**è¯¦ç»†åˆ†æ**: è§ `docs/WHY_USE_AGENT_FRAMEWORK.md`

---

## ğŸ¤ è‡´è°¢

- **H-EMVè®ºæ–‡**: Lukas Baermann et al. - æä¾›äº†ä¼˜ç§€çš„åŸºç¡€æ•°æ®ç»“æ„
- **AgentScopeå›¢é˜Ÿ**: é˜¿é‡Œå·´å·´è¾¾æ‘©é™¢ - æä¾›äº†å¼ºå¤§çš„å¤šæ™ºèƒ½ä½“æ¡†æ¶
- **è®¤çŸ¥ç§‘å­¦å®¶**: Ebbinghaus, Tulving, McClellandç­‰ - æä¾›äº†ç†è®ºåŸºç¡€

---

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE)

**å¼•ç”¨å»ºè®®**:
```bibtex
@misc{active-hemv-2024,
  title={Active-H-EMV: Agent-based Active Memory Management for Robots},
  author={[Your Name]},
  year={2024},
  note={Based on H-EMV by Baermann et al.}
}
```

---

## ğŸ“® è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿æäº¤ Issue æˆ– Pull Request

---

**ğŸ‰ ä»è¢«åŠ¨å­˜å‚¨åˆ°ä¸»åŠ¨ç®¡ç† â€”â€” Active-H-EMV**
